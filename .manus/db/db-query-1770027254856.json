{
  "query": "\n-- إنشاء جدول أقسام الكاشير\nCREATE TABLE IF NOT EXISTS `posCategories` (\n  `id` INT AUTO_INCREMENT PRIMARY KEY,\n  `name` VARCHAR(100) NOT NULL,\n  `nameAr` VARCHAR(100) NOT NULL,\n  `icon` VARCHAR(50),\n  `color` VARCHAR(20),\n  `sortOrder` INT DEFAULT 0 NOT NULL,\n  `isActive` BOOLEAN DEFAULT TRUE NOT NULL,\n  `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\n-- إنشاء جدول خدمات الكاشير\nCREATE TABLE IF NOT EXISTS `posServices` (\n  `id` INT AUTO_INCREMENT PRIMARY KEY,\n  `categoryId` INT NOT NULL,\n  `name` VARCHAR(150) NOT NULL,\n  `nameAr` VARCHAR(150) NOT NULL,\n  `description` TEXT,\n  `price` DECIMAL(10, 2) NOT NULL,\n  `duration` INT,\n  `sortOrder` INT DEFAULT 0 NOT NULL,\n  `isActive` BOOLEAN DEFAULT TRUE NOT NULL,\n  `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\n-- إنشاء جدول فواتير الكاشير\nCREATE TABLE IF NOT EXISTS `posInvoices` (\n  `id` INT AUTO_INCREMENT PRIMARY KEY,\n  `invoiceNumber` VARCHAR(50) NOT NULL,\n  `branchId` INT NOT NULL,\n  `branchName` VARCHAR(100),\n  `employeeId` INT NOT NULL,\n  `employeeName` VARCHAR(100),\n  `loyaltyCustomerId` INT,\n  `loyaltyCustomerName` VARCHAR(100),\n  `loyaltyCustomerPhone` VARCHAR(20),\n  `subtotal` DECIMAL(12, 2) NOT NULL,\n  `discountAmount` DECIMAL(12, 2) DEFAULT 0.00 NOT NULL,\n  `discountPercentage` DECIMAL(5, 2) DEFAULT 0.00 NOT NULL,\n  `discountReason` VARCHAR(100),\n  `total` DECIMAL(12, 2) NOT NULL,\n  `paymentMethod` ENUM('cash', 'card', 'split', 'loyalty') NOT NULL,\n  `cashAmount` DECIMAL(12, 2) DEFAULT 0.00 NOT NULL,\n  `cardAmount` DECIMAL(12, 2) DEFAULT 0.00 NOT NULL,\n  `status` ENUM('completed', 'cancelled', 'refunded') DEFAULT 'completed' NOT NULL,\n  `notes` TEXT,\n  `createdBy` INT NOT NULL,\n  `createdByName` VARCHAR(100),\n  `invoiceDate` TIMESTAMP NOT NULL,\n  `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\n-- إنشاء جدول بنود فواتير الكاشير\nCREATE TABLE IF NOT EXISTS `posInvoiceItems` (\n  `id` INT AUTO_INCREMENT PRIMARY KEY,\n  `invoiceId` INT NOT NULL,\n  `serviceId` INT NOT NULL,\n  `serviceName` VARCHAR(150) NOT NULL,\n  `serviceNameAr` VARCHAR(150) NOT NULL,\n  `price` DECIMAL(10, 2) NOT NULL,\n  `quantity` INT DEFAULT 1 NOT NULL,\n  `total` DECIMAL(12, 2) NOT NULL,\n  `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\n-- إنشاء جدول ملخص اليوم\nCREATE TABLE IF NOT EXISTS `posDailySummary` (\n  `id` INT AUTO_INCREMENT PRIMARY KEY,\n  `branchId` INT NOT NULL,\n  `branchName` VARCHAR(100),\n  `summaryDate` TIMESTAMP NOT NULL,\n  `totalInvoices` INT DEFAULT 0 NOT NULL,\n  `totalAmount` DECIMAL(15, 2) DEFAULT 0.00 NOT NULL,\n  `cashTotal` DECIMAL(15, 2) DEFAULT 0.00 NOT NULL,\n  `cardTotal` DECIMAL(15, 2) DEFAULT 0.00 NOT NULL,\n  `loyaltyTotal` DECIMAL(15, 2) DEFAULT 0.00 NOT NULL,\n  `totalDiscounts` DECIMAL(15, 2) DEFAULT 0.00 NOT NULL,\n  `cancelledCount` INT DEFAULT 0 NOT NULL,\n  `cancelledAmount` DECIMAL(15, 2) DEFAULT 0.00 NOT NULL,\n  `isClosed` BOOLEAN DEFAULT FALSE NOT NULL,\n  `closedBy` INT,\n  `closedAt` TIMESTAMP,\n  `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\n-- إنشاء جدول أداء الموظفين\nCREATE TABLE IF NOT EXISTS `posEmployeePerformance` (\n  `id` INT AUTO_INCREMENT PRIMARY KEY,\n  `employeeId` INT NOT NULL,\n  `employeeName` VARCHAR(100),\n  `branchId` INT NOT NULL,\n  `performanceDate` TIMESTAMP NOT NULL,\n  `invoiceCount` INT DEFAULT 0 NOT NULL,\n  `totalRevenue` DECIMAL(15, 2) DEFAULT 0.00 NOT NULL,\n  `averageInvoice` DECIMAL(12, 2) DEFAULT 0.00 NOT NULL,\n  `servicesCount` INT DEFAULT 0 NOT NULL,\n  `topServiceId` INT,\n  `topServiceName` VARCHAR(150),\n  `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 4FCVrv7uyUZp6pM.795ec0267000 --database dsLtTk22LX4iB7jABiF6k8 --execute \n-- إنشاء جدول أقسام الكاشير\nCREATE TABLE IF NOT EXISTS `posCategories` (\n  `id` INT AUTO_INCREMENT PRIMARY KEY,\n  `name` VARCHAR(100) NOT NULL,\n  `nameAr` VARCHAR(100) NOT NULL,\n  `icon` VARCHAR(50),\n  `color` VARCHAR(20),\n  `sortOrder` INT DEFAULT 0 NOT NULL,\n  `isActive` BOOLEAN DEFAULT TRUE NOT NULL,\n  `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\n-- إنشاء جدول خدمات الكاشير\nCREATE TABLE IF NOT EXISTS `posServices` (\n  `id` INT AUTO_INCREMENT PRIMARY KEY,\n  `categoryId` INT NOT NULL,\n  `name` VARCHAR(150) NOT NULL,\n  `nameAr` VARCHAR(150) NOT NULL,\n  `description` TEXT,\n  `price` DECIMAL(10, 2) NOT NULL,\n  `duration` INT,\n  `sortOrder` INT DEFAULT 0 NOT NULL,\n  `isActive` BOOLEAN DEFAULT TRUE NOT NULL,\n  `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\n-- إنشاء جدول فواتير الكاشير\nCREATE TABLE IF NOT EXISTS `posInvoices` (\n  `id` INT AUTO_INCREMENT PRIMARY KEY,\n  `invoiceNumber` VARCHAR(50) NOT NULL,\n  `branchId` INT NOT NULL,\n  `branchName` VARCHAR(100),\n  `employeeId` INT NOT NULL,\n  `employeeName` VARCHAR(100),\n  `loyaltyCustomerId` INT,\n  `loyaltyCustomerName` VARCHAR(100),\n  `loyaltyCustomerPhone` VARCHAR(20),\n  `subtotal` DECIMAL(12, 2) NOT NULL,\n  `discountAmount` DECIMAL(12, 2) DEFAULT 0.00 NOT NULL,\n  `discountPercentage` DECIMAL(5, 2) DEFAULT 0.00 NOT NULL,\n  `discountReason` VARCHAR(100),\n  `total` DECIMAL(12, 2) NOT NULL,\n  `paymentMethod` ENUM('cash', 'card', 'split', 'loyalty') NOT NULL,\n  `cashAmount` DECIMAL(12, 2) DEFAULT 0.00 NOT NULL,\n  `cardAmount` DECIMAL(12, 2) DEFAULT 0.00 NOT NULL,\n  `status` ENUM('completed', 'cancelled', 'refunded') DEFAULT 'completed' NOT NULL,\n  `notes` TEXT,\n  `createdBy` INT NOT NULL,\n  `createdByName` VARCHAR(100),\n  `invoiceDate` TIMESTAMP NOT NULL,\n  `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\n-- إنشاء جدول بنود فواتير الكاشير\nCREATE TABLE IF NOT EXISTS `posInvoiceItems` (\n  `id` INT AUTO_INCREMENT PRIMARY KEY,\n  `invoiceId` INT NOT NULL,\n  `serviceId` INT NOT NULL,\n  `serviceName` VARCHAR(150) NOT NULL,\n  `serviceNameAr` VARCHAR(150) NOT NULL,\n  `price` DECIMAL(10, 2) NOT NULL,\n  `quantity` INT DEFAULT 1 NOT NULL,\n  `total` DECIMAL(12, 2) NOT NULL,\n  `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\n-- إنشاء جدول ملخص اليوم\nCREATE TABLE IF NOT EXISTS `posDailySummary` (\n  `id` INT AUTO_INCREMENT PRIMARY KEY,\n  `branchId` INT NOT NULL,\n  `branchName` VARCHAR(100),\n  `summaryDate` TIMESTAMP NOT NULL,\n  `totalInvoices` INT DEFAULT 0 NOT NULL,\n  `totalAmount` DECIMAL(15, 2) DEFAULT 0.00 NOT NULL,\n  `cashTotal` DECIMAL(15, 2) DEFAULT 0.00 NOT NULL,\n  `cardTotal` DECIMAL(15, 2) DEFAULT 0.00 NOT NULL,\n  `loyaltyTotal` DECIMAL(15, 2) DEFAULT 0.00 NOT NULL,\n  `totalDiscounts` DECIMAL(15, 2) DEFAULT 0.00 NOT NULL,\n  `cancelledCount` INT DEFAULT 0 NOT NULL,\n  `cancelledAmount` DECIMAL(15, 2) DEFAULT 0.00 NOT NULL,\n  `isClosed` BOOLEAN DEFAULT FALSE NOT NULL,\n  `closedBy` INT,\n  `closedAt` TIMESTAMP,\n  `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\n-- إنشاء جدول أداء الموظفين\nCREATE TABLE IF NOT EXISTS `posEmployeePerformance` (\n  `id` INT AUTO_INCREMENT PRIMARY KEY,\n  `employeeId` INT NOT NULL,\n  `employeeName` VARCHAR(100),\n  `branchId` INT NOT NULL,\n  `performanceDate` TIMESTAMP NOT NULL,\n  `invoiceCount` INT DEFAULT 0 NOT NULL,\n  `totalRevenue` DECIMAL(15, 2) DEFAULT 0.00 NOT NULL,\n  `averageInvoice` DECIMAL(12, 2) DEFAULT 0.00 NOT NULL,\n  `servicesCount` INT DEFAULT 0 NOT NULL,\n  `topServiceId` INT,\n  `topServiceName` VARCHAR(150),\n  `createdAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  `updatedAt` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 3868
}