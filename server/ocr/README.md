# ğŸ§¾ Manus OCR System v3.0

## Ù†Ø¸Ø§Ù… OCR Ù…ØªÙƒØ§Ù…Ù„ Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø¥ÙŠØµØ§Ù„Ø§Øª POS

---

## ğŸ“‹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª

1. [Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©](#Ù†Ø¸Ø±Ø©-Ø¹Ø§Ù…Ø©)
2. [Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©](#Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª-Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©)
3. [Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©](#Ø§Ù„Ø¨Ù†ÙŠØ©-Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©)
4. [Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…ÙØµÙ„Ø­Ø©](#Ø§Ù„Ù…Ø´Ø§ÙƒÙ„-Ø§Ù„Ù…ÙØµÙ„Ø­Ø©)
5. [Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…](#Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…)
6. [Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ù…Ø¹ v2.0](#Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©-Ù…Ø¹-v20)
7. [Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±](#Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±)

---

## ğŸ¯ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

Ù†Ø¸Ø§Ù… OCR Ù…Ø­Ø³Ù‘Ù† Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù…Ø¨Ø§Ù„Øº ÙˆØ§Ù„ØªÙˆØ§Ø±ÙŠØ® Ù…Ù† ØµÙˆØ± Ø¥ÙŠØµØ§Ù„Ø§Øª Ù†Ù‚Ø§Ø· Ø§Ù„Ø¨ÙŠØ¹ (POS Terminal Receipts) Ù…Ø¹:

- âœ… Ø¯Ø¹Ù… Claude Opus 4.5 Ù„Ù„Ø¯Ù‚Ø© Ø§Ù„Ø¹Ø§Ù„ÙŠØ©
- âœ… Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø¥Ø¹Ø§Ø¯Ø© Ù…Ø­Ø§ÙˆÙ„Ø© Ø°ÙƒÙŠØ©
- âœ… Ù…Ø¹Ø§Ù„Ø¬Ø© ØµÙˆØ± ÙƒÙ€ fallback
- âœ… ØªÙ…ÙŠÙŠØ² Ø¨ÙŠÙ† ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙˆØ§Ø²Ù†Ø© ÙˆØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
- âœ… Circuit Breaker Ù„Ù„Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„ÙØ´Ù„ Ø§Ù„Ù…ØªÙƒØ±Ø±

---

## âœ¨ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

### 1. Ø¥ØµÙ„Ø§Ø­ ØªÙ…Ø±ÙŠØ± `s3Key` â­

**Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:** Ù„Ù… ÙŠÙƒÙ† ÙŠØªÙ… ØªÙ…Ø±ÙŠØ± `s3Key` Ù…Ù† `verifyBalanceImage` Ø¥Ù„Ù‰ `extractWithRetry`.

**Ø§Ù„Ø­Ù„:**
```typescript
// Ù‚Ø¨Ù„ (v2.0) âŒ
const extractionResult = await extractAmountFromImage(primaryImage.url, true, primaryImage.key);

// Ø¨Ø¹Ø¯ (v3.0) âœ…
const extractionResult = await extractAmountFromImage(primaryImage.url, {
  s3Key: primaryImage.key,
  useRetryStrategy: true
});
```

### 2. Ø¯Ø¹Ù… Claude Opus 4.5

```typescript
export const MODEL_CONFIG = {
  primary: "claude-opus-4-5-20250901",
  fallback: "claude-sonnet-4-5-20250929",
  maxTokens: 2000,
  temperature: 0.1,
  timeout: 30000,
};
```

### 3. Circuit Breaker

Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„ÙØ´Ù„ Ø§Ù„Ù…ØªÙƒØ±Ø±:
```typescript
const CIRCUIT_BREAKER = {
  failureThreshold: 5,     // Ø¹Ø¯Ø¯ Ø§Ù„ÙØ´Ù„ Ù‚Ø¨Ù„ ÙØªØ­ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©
  resetTimeout: 60000,     // Ù…Ø¯Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ø¨Ù„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
  state: 'closed',         // closed | open | half-open
};
```

### 4. Prompts Ù…Ø­Ø³Ù‘Ù†Ø© Ù„Ù„ØªÙ…ÙŠÙŠØ² Ø¨ÙŠÙ† Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®

```
âš ï¸ ØªÙ†Ø¨ÙŠÙ‡ Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹ - Ø§Ù„ØªÙ…ÙŠÙŠØ² Ø¨ÙŠÙ† Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Ø§Ù„Ø¥ÙŠØµØ§Ù„ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ØªØ§Ø±ÙŠØ®ÙŠÙ† Ù…Ø®ØªÙ„ÙÙŠÙ†:
1. âœ… ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙˆØ§Ø²Ù†Ø© (Settlement Date) - ÙÙŠ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø¹Ù„ÙˆÙŠ
2. âŒ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© (Print Date) - ÙÙŠ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø³ÙÙ„ÙŠ - ØªØ¬Ø§Ù‡Ù„ Ù‡Ø°Ø§
```

### 5. ØªØ­Ù„ÙŠÙ„ ØµÙˆØ±Ø© Ù…Ø­Ø³Ù‘Ù†

```typescript
// Laplacian variance Ù„Ù„Ø­Ø¯Ø© (Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† stdev Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠ)
private async calculateSharpness(buffer: Buffer): Promise<number> {
  const sharpened = await sharp(buffer)
    .greyscale()
    .convolve({
      width: 3,
      height: 3,
      kernel: [0, -1, 0, -1, 4, -1, 0, -1, 0] // Laplacian kernel
    })
    .raw()
    .toBuffer({ resolveWithObject: true });
  // Ø­Ø³Ø§Ø¨ variance
}
```

---

## ğŸ—ï¸ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     verifyBalanceImage()                     â”‚
â”‚                  (Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„ØªØ­Ù‚Ù‚)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   extractAmountFromImage()                   â”‚
â”‚                      (Ø®ÙŠØ§Ø±Ø§Øª: s3Key)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     extractWithRetry()                       â”‚
â”‚              (Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©)                     â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ direct_read  â”‚  â”‚numbers_focus â”‚  â”‚detailed_read â”‚       â”‚
â”‚  â”‚  (Ø£ÙˆÙ„ÙˆÙŠØ© 10) â”‚  â”‚  (Ø£ÙˆÙ„ÙˆÙŠØ© 8)  â”‚  â”‚  (Ø£ÙˆÙ„ÙˆÙŠØ© 6)  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Smart Fallback (Ø¥Ø°Ø§ ÙØ´Ù„ Ø§Ù„ÙƒÙ„)          â”‚    â”‚
â”‚  â”‚           â†“                                          â”‚    â”‚
â”‚  â”‚    enhanceWeakReceiptImage()                        â”‚    â”‚
â”‚  â”‚           â†“                                          â”‚    â”‚
â”‚  â”‚    Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø¹ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø­Ø³Ù‘Ù†Ø©                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    combineResults()                          â”‚
â”‚               (Ø¯Ù…Ø¬ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…ÙØµÙ„Ø­Ø©

| # | Ø§Ù„Ù…Ø´ÙƒÙ„Ø© | Ø§Ù„Ù…Ù„Ù | Ø§Ù„Ø­Ù„ |
|---|---------|-------|------|
| 1 | `s3Key` Ù„Ø§ ÙŠÙÙ…Ø±Ø± Ù„Ù€ `extractWithRetry` | balanceImageOCR | âœ… API Ø¬Ø¯ÙŠØ¯ Ù…Ø¹ options object |
| 2 | Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†Ù…ÙˆØ°Ø¬ Ù…Ø­Ø¯Ø¯ | Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª | âœ… Claude Opus 4.5 |
| 3 | Ù„Ø§ ÙŠÙˆØ¬Ø¯ timeout | ocrRetryStrategy | âœ… Promise.race Ù…Ø¹ timeout |
| 4 | Ù„Ø§ ÙŠÙˆØ¬Ø¯ circuit breaker | ocrRetryStrategy | âœ… Circuit breaker ÙƒØ§Ù…Ù„ |
| 5 | Prompts Ù„Ø§ ØªÙ…ÙŠØ² Ø§Ù„ØªÙˆØ§Ø±ÙŠØ® | ocrRetryStrategy | âœ… Prompts Ù…Ø­Ø³Ù‘Ù†Ø© |
| 6 | ØªØ­Ù„ÙŠÙ„ ØµÙˆØ±Ø© ØºÙŠØ± Ø¯Ù‚ÙŠÙ‚ | receiptEnhancer | âœ… Laplacian variance |
| 7 | Ù„Ø§ ÙŠÙˆØ¬Ø¯ metrics | Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª | âœ… Metrics Ø´Ø§Ù…Ù„Ø© |

---

## ğŸ“– Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

### Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙˆØ±Ø© Ù…ÙˆØ§Ø²Ù†Ø© (Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ)

```typescript
import { verifyBalanceImage } from './ocr';

const result = await verifyBalanceImage(
  {
    url: 'https://s3.amazonaws.com/bucket/receipt.jpg',
    key: 'receipts/2026-02-01/receipt.jpg',
    uploadedAt: '2026-02-01T10:30:00Z'
  },
  15000.50,      // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªÙˆÙ‚Ø¹
  '2026-02-01'   // Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ØªÙˆÙ‚Ø¹
);

if (result.success) {
  console.log('âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù†Ø§Ø¬Ø­');
  console.log(`Ø§Ù„Ù…Ø¨Ù„Øº: ${result.extractedAmount}`);
  console.log(`Ø§Ù„ØªØ§Ø±ÙŠØ®: ${result.extractedDate}`);
} else {
  console.log('âŒ ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚');
  console.log(`Ø§Ù„Ø³Ø¨Ø¨: ${result.message}`);
  result.warnings.forEach(w => console.log(`âš ï¸ ${w.message}`));
}
```

### Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙ‚Ø·

```typescript
import { extractAmountFromImage } from './ocr';

const extraction = await extractAmountFromImage(imageUrl, {
  s3Key: 'receipts/image.jpg',  // âœ… Ù„ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ©
  useRetryStrategy: true,
  timeout: 30000
});

console.log(`Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${extraction.grandTotal}`);
console.log(`Ø§Ù„Ø£Ù‚Ø³Ø§Ù…: ${extraction.sections.length}`);
console.log(`Ø§Ù„Ø«Ù‚Ø©: ${extraction.confidence}`);
```

### ØªØ­Ù„ÙŠÙ„ Ø¬ÙˆØ¯Ø© Ø§Ù„ØµÙˆØ±Ø©

```typescript
import { analyzeReceiptImage } from './ocr';

const { stats, readiness } = await analyzeReceiptImage(imageBuffer);

console.log(`Ø§Ù„ØªØ¨Ø§ÙŠÙ†: ${stats.contrast.toFixed(1)}%`);
console.log(`Ø§Ù„Ø­Ø¯Ø©: ${stats.sharpness.toFixed(1)}%`);
console.log(`Ø¬Ø§Ù‡Ø²ÙŠØ© OCR: ${readiness.level} (${readiness.score}/100)`);

if (readiness.recommendations.length > 0) {
  console.log('Ø§Ù„ØªÙˆØµÙŠØ§Øª:');
  readiness.recommendations.forEach(r => console.log(`  - ${r}`));
}
```

### Ù…Ø¹Ø§Ù„Ø¬Ø© ØµÙˆØ±Ø© Ø¶Ø¹ÙŠÙØ©

```typescript
import { enhanceWeakReceiptImage } from './ocr';

const result = await enhanceWeakReceiptImage(imageBuffer, {
  sharpenStrength: 1.5,
  denoiseStrength: 3
});

console.log(`Ù†Ø³Ø¨Ø© Ø§Ù„Ø¶ØºØ·: ${result.compressionPercent.toFixed(1)}%`);
console.log(`Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©: ${result.appliedOperations.join(', ')}`);

// Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø­Ø³Ù‘Ù†Ø©
const enhancedBase64 = result.base64;
```

---

## ğŸ“Š Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ù…Ø¹ v2.0

| Ø§Ù„Ù…ÙŠØ²Ø© | v2.0 | v3.0 |
|--------|------|------|
| ØªÙ…Ø±ÙŠØ± s3Key | âŒ Ù…ÙÙ‚ÙˆØ¯ ÙÙŠ extractWithRetry | âœ… ÙŠÙ…Ø± Ø¹Ø¨Ø± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ø¨Ù‚Ø§Øª |
| Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ | ØºÙŠØ± Ù…Ø­Ø¯Ø¯ | Claude Opus 4.5 |
| Timeout | âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ | âœ… 30 Ø«Ø§Ù†ÙŠØ© Ø§ÙØªØ±Ø§Ø¶ÙŠ |
| Circuit Breaker | âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ | âœ… ÙƒØ§Ù…Ù„ |
| ØªÙ…ÙŠÙŠØ² Ø§Ù„ØªÙˆØ§Ø±ÙŠØ® | âš ï¸ Ø¬Ø²Ø¦ÙŠ | âœ… ÙˆØ§Ø¶Ø­ ÙÙŠ Prompts |
| ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø© | stdev ØªÙ‚Ø±ÙŠØ¨ÙŠ | Laplacian variance |
| Metrics | âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ | âœ… Ø´Ø§Ù…Ù„Ø© |
| API | Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ù…Ù†ÙØµÙ„Ø© | Options object |

---

## ğŸ§ª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±

```typescript
import { 
  verifyBalanceImage, 
  extractWithRetry, 
  analyzeReceiptImage,
  VERSION 
} from './ocr';

console.log(`Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù…: ${VERSION.full}`);

// Ø§Ø®ØªØ¨Ø§Ø± 1: Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
async function testBasicVerification() {
  const result = await verifyBalanceImage(
    { url: 'test.jpg', key: 'test.jpg', uploadedAt: '2026-02-01' },
    1000,
    '2026-02-01'
  );
  console.assert(result.warnings !== undefined, 'ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ warnings');
}

// Ø§Ø®ØªØ¨Ø§Ø± 2: Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
async function testRetryStrategy() {
  const result = await extractWithRetry('test.jpg', {
    s3Key: 'test.jpg',
    maxRetries: 2
  });
  console.assert(result.metrics !== undefined, 'ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ metrics');
  console.assert(result.metrics.attemptsCount <= 2, 'ÙŠØ¬Ø¨ Ø£Ù„Ø§ ØªØªØ¬Ø§ÙˆØ² Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª');
}

// Ø§Ø®ØªØ¨Ø§Ø± 3: ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©
async function testImageAnalysis() {
  const buffer = Buffer.from('...'); // ØµÙˆØ±Ø© Ø§Ø®ØªØ¨Ø§Ø±ÙŠØ©
  const { stats, readiness } = await analyzeReceiptImage(buffer);
  console.assert(readiness.score >= 0 && readiness.score <= 100, 'Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¶Ù…Ù† Ø§Ù„Ù†Ø·Ø§Ù‚');
}
```

---

## ğŸ“ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª

```
manus-ocr-v3/
â”œâ”€â”€ index.ts              # Ø§Ù„ØªØµØ¯ÙŠØ± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
â”œâ”€â”€ balanceImageOCR.ts    # Ø®Ø¯Ù…Ø© OCR Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
â”œâ”€â”€ ocrRetryStrategy.ts   # Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
â”œâ”€â”€ receiptEnhancer.ts    # Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙˆØ±
â””â”€â”€ README.md             # Ø§Ù„ØªÙˆØ«ÙŠÙ‚
```

---

## ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù‡Ù…Ø©

1. **Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø¹Ø·Ù„Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹**: `enableProcessing: false` Ù„Ø£Ù† Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ© Ø£ÙØ¶Ù„ ÙÙŠ Ù…Ø¹Ø¸Ù… Ø§Ù„Ø­Ø§Ù„Ø§Øª.

2. **Smart Fallback**: ÙŠÙÙØ¹Ù‘Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ ÙØ´Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª.

3. **Circuit Breaker**: ÙŠØ­Ù…ÙŠ Ù…Ù† Ø§Ù„ÙØ´Ù„ Ø§Ù„Ù…ØªÙƒØ±Ø± ÙˆÙŠØ¹ÙŠØ¯ ÙØªØ­ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø¹Ø¯ 60 Ø«Ø§Ù†ÙŠØ©.

4. **Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®**: ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠÙÙ‡Ù… Ø£Ù† Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ù‡Ùˆ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙˆØ§Ø²Ù†Ø© (ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰).

---

## ğŸ”œ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©

- [ ] CLAHE Ø­Ù‚ÙŠÙ‚ÙŠ (ÙŠØªØ·Ù„Ø¨ OpenCV)
- [ ] Skew Detection & Correction
- [ ] Bilateral Filter Ù„Ù„ØªØ´ÙˆÙŠØ´
- [ ] A/B Testing Framework
- [ ] ML-based Quality Assessment

---

**ØªØ§Ø±ÙŠØ® Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:** 1 ÙØ¨Ø±Ø§ÙŠØ± 2026
**Ø§Ù„Ø¥ØµØ¯Ø§Ø±:** 3.0.0
