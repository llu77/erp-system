# نظام ERP الشامل - قائمة المهام

## قاعدة البيانات
- [x] جدول المستخدمين مع الأدوار (Admin, Manager, Employee)
- [x] جدول المنتجات والمخزون
- [x] جدول الفئات
- [x] جدول العملاء
- [x] جدول الموردين
- [x] جدول المبيعات والفواتير
- [x] جدول تفاصيل الفواتير
- [x] جدول المشتريات وأوامر الشراء
- [x] جدول تفاصيل أوامر الشراء
- [x] جدول الإشعارات
- [x] جدول سجل الأنشطة

## نظام المصادقة والصلاحيات
- [x] تسجيل الدخول بثلاثة مستويات (Admin, Manager, Employee)
- [x] حماية المسارات حسب الصلاحيات
- [x] إجراءات محمية للمدير والموظف

## لوحة التحكم الرئيسية
- [x] إحصائيات شاملة (المبيعات، المشتريات، المخزون، العملاء)
- [x] رسوم بيانية للمبيعات والمشتريات
- [x] تنبيهات المخزون المنخفض
- [x] آخر العمليات

## إدارة المستخدمين والموظفين
- [x] عرض قائمة المستخدمين
- [x] إضافة مستخدم جديد
- [x] تعديل بيانات المستخدم
- [x] حذف مستخدم
- [x] تعيين الصلاحيات

## إدارة المخزون والمنتجات
- [x] عرض قائمة المنتجات
- [x] إضافة منتج جديد
- [x] تعديل بيانات المنتج
- [x] حذف منتج
- [x] تتبع الكميات
- [x] تنبيهات نفاد المخزون
- [x] إدارة الفئات

## إدارة المبيعات والفواتير
- [x] إنشاء فاتورة جديدة
- [x] عرض قائمة الفواتير
- [x] تفاصيل الفاتورة
- [ ] طباعة الفاتورة
- [x] تتبع المبيعات

## إدارة المشتريات والموردين
- [x] تسجيل الموردين
- [x] إنشاء أمر شراء
- [x] عرض قائمة أوامر الشراء
- [x] إدارة فواتير الموردين

## إدارة العملاء
- [x] قاعدة بيانات العملاء
- [x] إضافة عميل جديد
- [x] تعديل بيانات العميل
- [x] سجل المعاملات
- [x] معلومات الاتصال

## التقارير المالية والإحصائيات
- [x] تقارير المبيعات
- [x] تقارير المشتريات
- [x] تقارير الأرباح
- [x] تقارير المخزون
- [ ] تصدير التقارير إلى PDF
- [ ] تصدير التقارير إلى Excel
- [ ] حفظ التقارير في التخزين السحابي

## الإشعارات التلقائية
- [x] إشعار نفاد المخزون
- [x] إشعار أوامر الشراء الجديدة
- [x] إشعار المبيعات الكبيرة

## الواجهة والتصميم
- [x] واجهة عربية كاملة RTL
- [x] تصميم احترافي ونظيف
- [x] تصميم متجاوب
- [x] قائمة جانبية للتنقل

## الإشعارات المخصصة (طلب جديد)
- [x] إضافة إجراء لإرسال إشعارات مخصصة من المدير
- [x] واجهة إرسال إشعارات مخصصة
- [x] عرض الإشعارات مع جرس الإشعارات

## نظام البونص الأسبوعي (طلب جديد)
- [x] إضافة جداول البونص (weeklyBonuses, bonusDetails, bonusAuditLog)
- [x] جداول الفروع والموظفين والإيرادات
- [x] إنشاء منطق حساب البونص (5 مستويات)
- [x] تزامن تلقائي مع إدخال الإيرادات
- [x] صفحة إدخال الإيرادات اليومية
- [x] صفحة البونص للمشرف
- [x] صفحة طلبات البونص للأدمن
- [x] انعكاس الإيرادات على البونص بشكل تلقائي
- [x] اختبارات vitest لحاسبة البونص

## إدارة الفروع والموظفين (طلب جديد)
- [x] صفحة إدارة الفروع (إضافة، تعديل، حذف)
- [x] صفحة إدارة الموظفين (إضافة، تعديل، حذف، ربط بالفرع)
- [x] إضافة الروابط في القائمة الجانبية
- [x] اختبارات vitest (41 اختبار ناجح)

## نظام طلبات الموظفين (طلب جديد)
- [x] جدول طلبات الموظفين في قاعدة البيانات
- [x] أنواع الطلبات: سلفة، إجازة، صرف متأخرات، استئذان، اعتراض، استقالة
- [x] دوال قاعدة البيانات للطلبات (CRUD)
- [x] إجراءات tRPC للطلبات
- [x] صفحة تقديم الطلبات للموظف
- [x] صفحة إدارة الطلبات للمدير (موافقة/رفض)
- [x] إشعارات عند تقديم طلب جديد أو تغيير الحالة
- [x] سجل تدقيق للطلبات
- [x] اختبارات vitest (62 اختبار ناجح)

## نظام مسيرات الرواتب (مكتمل)
- [x] جدول مسيرات الرواتب (payrolls)
- [x] جدول تفاصيل الرواتب (payroll_details)
- [x] حساب الراتب: أساسي (2000) + ساعات إضافية (1000 إذا مفعل) + حوافز مشرف (400)
- [x] خصومات الموظفين
- [x] إنشاء مسيرة رواتب شهرية (يوم 28)
- [x] صفحة مسيرات الرواتب
- [x] تصدير مسيرات الرواتب PDF احترافي

## صفحة المصاريف (مكتمل)
- [x] جدول المصاريف (expenses)
- [x] أنواع المصاريف (10 تصنيفات)
- [x] صفحة إدارة المصاريف (إضافة، تعديل، حذف)
- [x] سير عمل الموافقات (مراجعة -> اعتماد -> دفع)

## تصدير PDF احترافي (مكتمل)
- [x] هاندلر تصدير PDF للتقارير
- [x] قالب PDF احترافي للرواتب
- [x] قالب PDF للإيرادات
- [x] قالب PDF لطلبات الموظفين الموافق عليها
- [x] قالب PDF للمصاريف
- [x] اختبارات vitest (95 اختبار ناجح)

## نظام تسجيل الدخول المحلي (مكتمل)
- [x] إضافة حقول username و password إلى جدول المستخدمين
- [x] إنشاء حساب Admin (username: Admin, password: Omar101010)
- [x] نظام تسجيل دخول محلي بدلاً من OAuth فقط
- [x] صفحة تسجيل دخول محلية
- [x] تشفير كلمات المرور (PBKDF2 + SHA-512)

## صلاحيات المشرفين المحدودة (مكتمل)
- [x] المشرف يمكنه إدخال الإيرادات فقط (بدون تعديل/حذف)
- [x] المشرف يمكنه إدخال المصاريف فقط (بدون تعديل/حذف)
- [x] المشرف يمكنه تقديم الطلبات فقط
- [x] Admin فقط يمكنه التعديل والحذف
- [x] اختبارات vitest (106 اختبار ناجح)

## طباعة الفواتير (مكتمل)
- [x] قالب طباعة احترافي للفواتير
- [x] معاينة الفاتورة قبل الطباعة
- [x] معلومات الشركة في الفاتورة
- [ ] دعم QR Code (مستقبلي)

## تصدير التقارير (مكتمل)
- [x] تصدير PDF للتقارير
- [x] تصدير Excel للتقارير
- [ ] حفظ التقارير في S3 (مستقبلي)

## صفحة الإعدادات (مكتمل)
- [x] إعدادات الشركة (الاسم، الشعار، العنوان)
- [x] إعدادات الضرائب
- [x] إعدادات العملة
- [x] إعدادات الرواتب (الراتب الأساسي، الساعات الإضافية، حوافز المشرف)

## تقرير الأرباح والخسائر (مكتمل)
- [x] تقرير تفصيلي للأرباح والخسائر
- [x] قائمة الدخل التفصيلية
- [x] المؤشرات الرئيسية (هوامش الربح)
- [x] رسوم بيانية للاتجاه الشهري
- [x] توزيع المصاريف حسب الفئة
- [x] تصدير PDF/Excel

## البيانات التجريبية (مكتمل)
- [x] إضافة فروع تجريبية (5 فروع)
- [x] إضافة موظفين تجريبيين (15 موظف)
- [x] إضافة فئات ومنتجات (20 منتج)
- [x] إضافة عملاء (10 عملاء)
- [x] إضافة موردين (5 موردين)
- [x] إضافة فواتير مبيعات (10 فواتير)
- [x] إضافة 5 فئات منتجات
